{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useContext,useState}from'react';import{Form,Button}from'react-bootstrap';import{BASE_URL}from'../../App';import{faTimes}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{Authentication}from'../../Contexts/Authentication';import Modal from'react-modal';import{signInSuccess}from'../../Tools/WebsiteResponses';import url from'../../Tools/URLs';var LoginModal=function LoginModal(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];// Get input\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];// Handle error from API\nvar _useContext=useContext(Authentication),isLogged=_useContext.isLogged,setIsLogged=_useContext.setIsLogged;var handleChange=function handleChange(e){setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));};var logIn=function logIn(e){e.preventDefault();axios.post(\"\".concat(url,\"/login\"),input).then(function(res){if(res.status===200){signInSuccess();setIsLogged(true);localStorage.setItem('token',res.data.token);localStorage.setItem('sessionID',res.data.user._id);}props.setIsLoginOpen(false);}).catch(function(err){if(err.response.status===409){setError(err.response.data.message);}});};var errorStyle={color:'#d10000',fontSize:'18px',margin:'10px',padding:'7px',borderRadius:'9px',backgroundColor:'whitesmoke'};var goToSignup=function goToSignup(){props.setIsLoginOpen(false);props.setIsSignupOpen(true);};return/*#__PURE__*/_jsxs(Modal,{isOpen:props.isLoginOpen,onRequestClose:props.closeLogin,style:props.modalStyle,contentLabel:\"Example Modal\",closeLogin:props.closeLogin,children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return props.setIsLoginOpen(false);},className:\"modal-close-btn\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})}),/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center',color:'#434343'},children:\"Login\"}),/*#__PURE__*/_jsxs(Form,{className:\"login-form\",onSubmit:logIn,children:[/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Email\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"login-btn\",children:\" Login \"}),error&&/*#__PURE__*/_jsxs(\"span\",{style:errorStyle,children:[\" \",error,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"go-to-signup\",onClick:goToSignup,children:\" New ? Sign Up ! \"})]});};export default LoginModal;","map":{"version":3,"sources":["/home/burslf/ITC/SKIN/SkinAI/src/Components/Modals/LoginModal.jsx"],"names":["axios","useContext","useState","Form","Button","BASE_URL","faTimes","FontAwesomeIcon","Authentication","Modal","signInSuccess","url","LoginModal","props","input","setInput","error","setError","isLogged","setIsLogged","handleChange","e","target","name","value","logIn","preventDefault","post","then","res","status","localStorage","setItem","data","token","user","_id","setIsLoginOpen","catch","err","response","message","errorStyle","color","fontSize","margin","padding","borderRadius","backgroundColor","goToSignup","setIsSignupOpen","isLoginOpen","closeLogin","modalStyle","textAlign"],"mappings":"khBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OAAQC,IAAR,CAAcC,MAAd,KAA2B,iBAA3B,CACA,OAAQC,QAAR,KAAuB,WAAvB,CACA,OAASC,OAAT,KAAwB,mCAAxB,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,cAAT,KAA+B,+BAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,aAAT,KAA8B,8BAA9B,CACA,MAAOC,CAAAA,GAAP,KAAgB,kBAAhB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,eACAX,QAAQ,CAAC,IAAD,CADR,wCACnBY,KADmB,eACZC,QADY,eACe;AADf,eAEAb,QAAQ,CAAC,IAAD,CAFR,yCAEnBc,KAFmB,eAEZC,QAFY,eAEe;AAFf,gBAIMhB,UAAU,CAACO,cAAD,CAJhB,CAInBU,QAJmB,aAInBA,QAJmB,CAITC,WAJS,aAITA,WAJS,CAM1B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxBN,QAAQ,gCAAKD,KAAL,wBAAaO,CAAC,CAACC,MAAF,CAASC,IAAtB,CAA8BF,CAAC,CAACC,MAAF,CAASE,KAAvC,GAAR,CACH,CAFD,CAIA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACJ,CAAD,CAAO,CACjBA,CAAC,CAACK,cAAF,GACA1B,KAAK,CAAC2B,IAAN,WAAchB,GAAd,WAA2BG,KAA3B,EACCc,IADD,CACM,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpBpB,aAAa,GACbS,WAAW,CAAC,IAAD,CAAX,CACAY,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,GAAG,CAACI,IAAJ,CAASC,KAAvC,EACAH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCH,GAAG,CAACI,IAAJ,CAASE,IAAT,CAAcC,GAAhD,EACH,CACDvB,KAAK,CAACwB,cAAN,CAAqB,KAArB,EACH,CATD,EAUCC,KAVD,CAUO,SAAAC,GAAG,CAAI,CACV,GAAGA,GAAG,CAACC,QAAJ,CAAaV,MAAb,GAAwB,GAA3B,CAAgC,CAC5Bb,QAAQ,CAACsB,GAAG,CAACC,QAAJ,CAAaP,IAAb,CAAkBQ,OAAnB,CAAR,CACH,CACJ,CAdD,EAeH,CAjBD,CAmBA,GAAMC,CAAAA,UAAU,CAAG,CACfC,KAAK,CAAE,SADQ,CAEfC,QAAQ,CAAE,MAFK,CAGfC,MAAM,CAAE,MAHO,CAIfC,OAAO,CAAE,KAJM,CAKfC,YAAY,CAAE,KALC,CAMfC,eAAe,CAAE,YANF,CAAnB,CASA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrBpC,KAAK,CAACwB,cAAN,CAAqB,KAArB,EACAxB,KAAK,CAACqC,eAAN,CAAsB,IAAtB,EACH,CAHD,CAKA,mBACI,MAAC,KAAD,EACE,MAAM,CAAErC,KAAK,CAACsC,WADhB,CAEE,cAAc,CAAEtC,KAAK,CAACuC,UAFxB,CAGE,KAAK,CAAEvC,KAAK,CAACwC,UAHf,CAIE,YAAY,CAAC,eAJf,CAKE,UAAU,CAAExC,KAAK,CAACuC,UALpB,wBAOI,aAAM,OAAO,CAAE,yBAAMvC,CAAAA,KAAK,CAACwB,cAAN,CAAqB,KAArB,CAAN,EAAf,CAAkD,SAAS,CAAC,iBAA5D,uBAA8E,KAAC,eAAD,EAAiB,IAAI,CAAE/B,OAAvB,EAA9E,EAPJ,cAQI,WAAI,KAAK,CAAE,CAACgD,SAAS,CAAE,QAAZ,CAAsBX,KAAK,CAAE,SAA7B,CAAX,mBARJ,cASI,MAAC,IAAD,EAAM,SAAS,CAAE,YAAjB,CAA8B,QAAQ,CAAElB,KAAxC,wBACI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,OAAnB,CAA2B,IAAI,CAAC,OAAhC,CAAwC,WAAW,CAAC,OAApD,CAA4D,QAAQ,CAAE,kBAAAJ,CAAC,QAAED,CAAAA,YAAY,CAACC,CAAD,CAAd,EAAvE,EADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,IAAI,CAAC,UAAnC,CAA8C,WAAW,CAAC,UAA1D,CAAqE,QAAQ,CAAE,kBAAAA,CAAC,QAAED,CAAAA,YAAY,CAACC,CAAD,CAAd,EAAhF,EAFJ,cAGI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,WAAhC,qBAHJ,CAIKL,KAAK,eAAI,cAAM,KAAK,CAAE0B,UAAb,eAA2B1B,KAA3B,OAJd,GATJ,cAeI,YAAK,SAAS,CAAC,cAAf,CAA8B,OAAO,CAAEiC,UAAvC,+BAfJ,GADJ,CAmBH,CA9DD,CAgEA,cAAerC,CAAAA,UAAf","sourcesContent":["import axios from 'axios'\nimport { useContext, useState } from 'react'\nimport {Form, Button} from 'react-bootstrap'\nimport {BASE_URL} from '../../App'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Authentication } from '../../Contexts/Authentication'\nimport Modal from 'react-modal';\nimport { signInSuccess } from '../../Tools/WebsiteResponses';\nimport url from '../../Tools/URLs';\n\nconst LoginModal = (props) => {\n    const [input, setInput] = useState(null) // Get input\n    const [error, setError] = useState(null) // Handle error from API\n\n    const {isLogged, setIsLogged} = useContext(Authentication) \n\n    const handleChange = (e) => {\n        setInput({...input, [e.target.name] : e.target.value})\n    }\n\n    const logIn = (e) => {\n        e.preventDefault()\n        axios.post(`${url}/login`, input)\n        .then(res => {\n            if (res.status === 200) {\n                signInSuccess()\n                setIsLogged(true);\n                localStorage.setItem('token', res.data.token)\n                localStorage.setItem('sessionID', res.data.user._id)\n            }\n            props.setIsLoginOpen(false)\n        })\n        .catch(err => {\n            if(err.response.status === 409) {\n                setError(err.response.data.message)\n            }\n        })\n    }\n\n    const errorStyle = {\n        color: '#d10000', \n        fontSize: '18px', \n        margin: '10px', \n        padding: '7px',\n        borderRadius: '9px',\n        backgroundColor: 'whitesmoke'\n    }\n\n    const goToSignup = () => {\n        props.setIsLoginOpen(false)\n        props.setIsSignupOpen(true)\n    }\n\n    return (\n        <Modal\n          isOpen={props.isLoginOpen}\n          onRequestClose={props.closeLogin}\n          style={props.modalStyle}\n          contentLabel=\"Example Modal\"\n          closeLogin={props.closeLogin}\n            >\n            <span onClick={() => props.setIsLoginOpen(false)} className='modal-close-btn'><FontAwesomeIcon icon={faTimes}/></span>\n            <h2 style={{textAlign: 'center', color: '#434343'}}>Login</h2>\n            <Form className ='login-form' onSubmit={logIn}>\n                <Form.Control type=\"email\" name=\"email\" placeholder=\"Email\" onChange={e=>handleChange(e)}/>\n                <Form.Control type=\"password\" name=\"password\" placeholder=\"Password\" onChange={e=>handleChange(e)}/>\n                <Button type='submit' className='login-btn'> Login </Button>\n                {error && <span style={errorStyle}> {error} </span>}\n            </Form>\n            <div className='go-to-signup' onClick={goToSignup}> New ? Sign Up ! </div>\n       </Modal>\n    )\n}\n\nexport default LoginModal"]},"metadata":{},"sourceType":"module"}