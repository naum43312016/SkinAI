{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/burslf/ITC/SKIN/SkinAI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faCamera}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import axios from'axios';import{useEffect,useRef,useState}from'react';import{Container,Form,Button,Dropdown}from'react-bootstrap';import'./UploadForm.css';import{Redirect}from'react-router';import{BASE_URL}from'../../App';var UploadForm=function UploadForm(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),infos=_useState2[0],setInfos=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dropdownOpen=_useState4[0],setDropdownOpen=_useState4[1];var _useState5=useState({selectedFile:null}),_useState6=_slicedToArray(_useState5,2),pic=_useState6[0],setPic=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),previewPic=_useState8[0],setPreviewPic=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];// in case of success\nvar toggle=function toggle(){return setDropdownOpen(function(prevState){return!prevState;});};var ref=useRef(null);var handleChange=function handleChange(e){setInfos(_objectSpread(_objectSpread({},infos),{},_defineProperty({},e.target.name,e.target.value)));};var imageUploadStyle={color:\"#434343\",fontSize:\"35px\"};var handleSelect=function handleSelect(e){setInfos(_objectSpread(_objectSpread({},infos),{},{category:e.target.name}));};var postItem=function postItem(e){e.preventDefault();var data=new FormData();for(var key in infos){data.append(key,infos[key]);}if(pic.selectedFile){data.append('image',pic.selectedFile,\"\".concat(Date.now(),\"-\").concat(pic.selectedFile.name));}axios.post(\"\".concat(BASE_URL,\"/item\"),data,{headers:{'Authorization':'Bearer '+localStorage.getItem('token')}}).then(function(res){if(res.status===200){setRedirect(true);}})// if success so set success & redirect to homepage\n.catch(function(err){// fetch error message from server\nvar error=err.response.data;var errorMessages=error.message||error.category||error.name||error.condition||error.description||error.price;console.log(errorMessages);});};useEffect(function(){},[]);if(redirect){return/*#__PURE__*/_jsx(Redirect,{to:BASE_URL});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{action:\"\",className:\"upload-form\",onSubmit:function onSubmit(e){return postItem(e);},encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:ref,id:\"hidden\",onChange:function onChange(e){var file=e.target.files[0];var reader=new FileReader();reader.onload=function(e){setPreviewPic(e.target.result);};reader.readAsDataURL(file);setPic({selectedFile:e.target.files[0]});}}),/*#__PURE__*/_jsx(\"div\",{className:\"image-upload\",onClick:function onClick(){return ref.current.click();},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{style:imageUploadStyle,icon:faCamera})}),previewPic&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview\",children:/*#__PURE__*/_jsx(\"img\",{src:previewPic,alt:\"loaded pic\"})}),/*#__PURE__*/_jsx(Form.Control,{className:\"upload-input\",name:\"name\",placeholder:\"Name\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(Form.Control,{className:\"upload-input\",type:\"number\",name:\"age\",placeholder:\"Age\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsxs(Dropdown,{isOpen:dropdownOpen,toggle:toggle,children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{caret:true,children:infos&&infos.category||'Gender'}),/*#__PURE__*/_jsxs(Dropdown.Menu,{align:\"right\",children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(e){return handleSelect(e);},name:\"Male\",children:\" Male \"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(e){return handleSelect(e);},name:\"Female\",children:\" Female \"})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\" Add an item \"})]})});};export default UploadForm;","map":{"version":3,"sources":["/home/burslf/ITC/SKIN/SkinAI/src/Components/UploadForm/UploadForm.jsx"],"names":["faCamera","FontAwesomeIcon","axios","useEffect","useRef","useState","Container","Form","Button","Dropdown","Redirect","BASE_URL","UploadForm","infos","setInfos","dropdownOpen","setDropdownOpen","selectedFile","pic","setPic","previewPic","setPreviewPic","redirect","setRedirect","toggle","prevState","ref","handleChange","e","target","name","value","imageUploadStyle","color","fontSize","handleSelect","category","postItem","preventDefault","data","FormData","key","append","Date","now","post","headers","localStorage","getItem","then","res","status","catch","err","error","response","errorMessages","message","condition","description","price","console","log","file","files","reader","FileReader","onload","result","readAsDataURL","current","click"],"mappings":"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","sourcesContent":["import { faCamera} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport { useEffect, useRef, useState } from 'react'\nimport {Container,Form, Button, Dropdown} from 'react-bootstrap'\nimport './UploadForm.css'\nimport {Redirect} from 'react-router'\nimport {BASE_URL} from '../../App'\n\nconst UploadForm = () => {\n    const [infos, setInfos] = useState(null)\n    const [dropdownOpen, setDropdownOpen] = useState(false);\n    const [pic, setPic] = useState({selectedFile: null})\n    const [previewPic, setPreviewPic] = useState(\"\")\n    const [redirect, setRedirect] = useState(false) // in case of success\n\n    const toggle = () => setDropdownOpen(prevState => !prevState);\n  \n    const ref = useRef(null)\n\n    const handleChange = (e) => {\n        setInfos({\n            ...infos,\n            [e.target.name] : e.target.value\n        })\n    }\n    \n    const imageUploadStyle = {\n        color: \"#434343\", \n        fontSize: \"35px\",\n    }\n\n    const handleSelect = (e) => {\n        setInfos({...infos, category: e.target.name})\n    }\n\n    const postItem = (e) => {\n        e.preventDefault()\n        const data = new FormData()\n        for(let key in infos) {\n            data.append(key, infos[key])\n        }\n        if(pic.selectedFile) {\n            data.append('image', pic.selectedFile, `${Date.now()}-${pic.selectedFile.name}`)\n        }\n        axios.post(`${BASE_URL}/item`, data, {headers: {'Authorization' : 'Bearer ' + localStorage.getItem('token')}})\n            .then(res => {\n                if(res.status === 200) {\n                    setRedirect(true)\n                }\n            }) // if success so set success & redirect to homepage\n            .catch(err => {\n                // fetch error message from server\n                const error = err.response.data \n                const errorMessages = error.message || error.category || error.name || error.condition || error.description || error.price \n                console.log(errorMessages)\n            })\n    }\n\n    useEffect(() => {\n\n    }, [])\n\n    if(redirect) {\n        return (\n            <Redirect to={BASE_URL}/>\n        )\n    }\n    return (\n        <Container>\n        <Form action=\"\" className=\"upload-form\" onSubmit={e=> postItem(e)} encType=\"multipart/form-data\">\n            <input type=\"file\" ref={ref} id=\"hidden\" onChange={(e) => {     \n                const file = e.target.files[0]\n                const reader = new FileReader()\n                reader.onload = (e) => {\n                    setPreviewPic(e.target.result)\n                }\n                reader.readAsDataURL(file)\n                setPic({selectedFile :e.target.files[0]})\n                } }/>\n            <div className=\"image-upload\" onClick={() => ref.current.click()}><FontAwesomeIcon style={imageUploadStyle}  icon={faCamera}/></div>\n            {previewPic && <div className=\"image-preview\"><img src={previewPic} alt=\"loaded pic\" /></div>}\n            <Form.Control className=\"upload-input\" name=\"name\" placeholder=\"Name\" onChange={e => handleChange(e)}/>\n            <Form.Control className=\"upload-input\" type=\"number\" name=\"age\" placeholder=\"Age\" onChange={e => handleChange(e)}/>\n            <Dropdown isOpen={dropdownOpen} toggle={toggle}>\n                <Dropdown.Toggle caret>{(infos && infos.category) || 'Gender'}</Dropdown.Toggle>\n                <Dropdown.Menu align='right'>\n                        <Dropdown.Item onClick={(e) => handleSelect(e)} name='Male'> Male </Dropdown.Item>\n                        <Dropdown.Item onClick={(e) => handleSelect(e)} name='Female'> Female </Dropdown.Item>\n                </Dropdown.Menu>\n        </Dropdown>\n            <Button type=\"submit\"> Add an item </Button>\n        </Form>\n    </Container>\n    )\n}\n\nexport default UploadForm"]},"metadata":{},"sourceType":"module"}